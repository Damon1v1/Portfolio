const path=require("path"),express=require("express"),compression=require("compression"),exphbs=require("express-handlebars"),serveStatic=require("serve-static"),session=require("express-session"),routes=require("./controllers"),homeRoutes=require("./controllers/home-routesMin"),portfolioRoutes=require("./controllers/portfolio-routesMin"),contactRoutes=require("./controllers/contact-routesMin"),sequelize=require("./config/connectionMin"),SequelizeStore=require("connect-session-sequelize")(session.Store),app=express(),PORT=process.env.PORT||3001,hbs=exphbs.create(),sess={secret:"Super secret secret",cookie:{},resave:!1,saveUninitialized:!0,store:new SequelizeStore({db:sequelize})};app.use(session(sess)),app.engine("handlebars",hbs.engine),app.set("view engine","handlebars"),app.use(express.json()),app.use(express.urlencoded({extended:!0})),app.use(compression()),app.use(routes),app.use(homeRoutes),app.use(portfolioRoutes),app.use(contactRoutes),app.use(serveStatic(path.join(__dirname,"public"))),app.get("/",function(e,s){s.json(path.join(__dirname,"public/index.html"))}),sequelize.sync({force:!1}).then(()=>{app.listen(PORT,()=>console.log("Now listening"))});